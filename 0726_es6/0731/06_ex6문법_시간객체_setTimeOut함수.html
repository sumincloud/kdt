<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>06_ex6문법_시간객체_setTimeOut함수</title>
</head>
<body>
  <h2>06_ex6문법_시간객체_setTimeOut함수</h2>
  <p>시간객체 new Date();</p>
  <p>시간함수 setTimeOut();</p>

  <h3>실시간 디지털 시계</h3>
  <div id="clock"></div>

  <script>
    function startTime(){ //사용자 정의 함수
      let today = new Date();
      // document.write(today.getHours()+':'); //시
      // document.write(today.getMinutes()+':'); //분
      // document.write(today.getSeconds()); //초
      let h = today.getHours(); //시
      let m = today.getMinutes(); //분
      let s = today.getSeconds(); //초

      h = checknum(h);
      m = checknum(m);
      s = checknum(s);

      document.getElementById('clock').innerHTML=h+':'+m+':'+s; //시:분:초

      let t = setTimeout(startTime, 500); //0.5초마다 함수가 호출
    }
    //함수명으로 호출하여 내용출력
    startTime();

    //시, 분, 초가 1-9까지일 경우 숫자앞에 문자 '0'을 붙이기
    function checknum(i){
      if(i<10){
        i = '0' + i;
      }
      return i; //조건문을 종료하고 변수 i값을 위 startTime함수에 넘겨준다.(리턴)
    }
  </script>

  <h3>D-day값 설정하기</h3>
  <p>사용자가 설정한 날짜에 맞춰 현재 날짜를 계산하여 남은 일수 구하기</p>
  <p>시작날짜 : 2024-07-31, 끝나는 날짜 : 2024-09-02</p>
  <p>D-day = 끝나는 날짜 - 시작날짜</p>
  
  <div id="dday"></div>
  <p>월 출력시 0-11까지이기 때문에 기존값에 1을 더하여 계산한다. </p>

  <script>
    // 1. 변수선언
    let today = new Date(); //날짜객체 생성
    let dday = new Date(2024,8,2); //목표날짜(종강날짜)

    document.write(today.getMonth()+1);//기존값에 1을 더해야 7이 나옴.

    let gap = dday.getTime() - today.getTime(); //밀리초 특정날짜-현재날짜
    console.log(dday);
    //console.log(gap); //5406145202
    //1분 = 60
    //1시간 = 60
    //1일 = 24시간*60분*60초*1000 밀리초
    let result = Math.ceil(gap/(1000*60*60*24));     
    document.getElementById('dday').innerHTML='D-day까지 <strong>'+ result +'</strong>일 남았습니다.';
  </script>
</body>
</html>