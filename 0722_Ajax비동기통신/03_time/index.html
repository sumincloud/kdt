<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>02_time-비동기방식으로 시간데이터 출력하기</title>
</head>
<body>
  <h2>02_time-비동기방식으로 시간데이터 출력하기</h2>
  <p>비동기방식으로 버튼 클릭시 시간데이터가 변경되도록 하기</p>

  <h3>1. 자바스크립트로 시간데이터 출력하기(함수 반복호출)</h3>
  <span id="time"></span>

  <h3>2. 버튼 클릭시 php로 시간데이터 출력하기(새로고침 없이 비동기방식)</h3>
  <span id="time2"></span>
  <input type="button" value="시간출력하기" id="execute">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      // execute버튼을 클릭하면
      $("#execute").click(function(){
        //비동기 통신을 실행
        $.ajax({
          url:'time.php', //php문서 실행
          success:function(data){ //성공적으로 불러오면
            $('#time2').text(data);//data출력한다.
          }
        })
      });
    });
    //시간데이터 출력하기
    function time(){
      let today = new Date();
      //document.write(today+"<br>");
      let h = today.getHours();//시
      let m = today.getMinutes();//분
      let s = today.getSeconds();//초
      // document.write(`현재시간 - ${h}:${m}:${s}`);
      document.getElementById('time').innerHTML=h+":"+m+":"+s;
      let t = setTimeout(time,500);
    }
    time();
  </script>
</body>
</html>